@startuml TextAdventure Class Diagram
package es.hugoalvarezajenjo.textadventure {
    package model {
        class Player {
            - health: int
            - weapon: Weapon
            + new(health: int, weapon: Weapon): Player
        }

        abstract Weapon{
            - name: String
            - damage: int
            + new(name: String, damage: int): Weapon
            + getName(): String
            + getDamage(): int
        }

        class Knife {
            + new(): Knife
        }
        class LongSword {
            + new(): LongSword
        }

        abstract Story {
            - title: String
            - choice1: String
            - choice2: String
            - choice3: String
            - choice4: String
            + new(title: String, choice1: String, choice2: String, choice3: String, choice4: String): Story
            + makeChoice(choice: String): Story
            # {abstract} choice1(): Story
            # {abstract} choice2(): Story
            # {abstract} choice3(): Story
            # {abstract} choice4(): Story
        }

        class TownStory {
            + new(): TownStory
            # choice1(): Story
            # choice2(): Story
            # choice3(): Story
            # choice4(): Story
        }

        class AttackGuardStory{
            + new(): TownStory
            # choice1(): Story
            # choice2(): Story
            # choice3(): Story
            # choice4(): Story
        }

        class CrossTheRoadStory{
            + new(): TownStory
            # choice1(): Story
            # choice2(): Story
            # choice3(): Story
            # choice4(): Story
        }

        class TalkGuardStory{
            + new(): TownStory
            # choice1(): Story
            # choice2(): Story
            # choice3(): Story
            # choice4(): Story
        }
    }

    package logic {
        class PlayerManager <<controller>>{
            - player: Player
            + new(): PlayerManager
            + getPlayerHp(): int
            + getPlayerWeaponName(): String
        }

        class StoryManager <<controller>> {
            - story: Story
            + new(): StoryManager
            + getStoryTitle(): String
            + getStoryChoices(): String[]
            + makeChoice(choice: String): boolean
        }
    }

    package ui {
        class MainWindow <<UI>> {
            + new(): MainWindow
        }
        class MainWindowController <<UIController>> {
            - mainWindow: MainWindow
            + new(mainWindow: MainWindow): MainWindowController
            + showStartScreen()
            + showChoiceScreen()
        }
        abstract WindowScreen <<UI>> {
            + new(): WindowScreen
        }

        package theme {
            class Fonts {
                + {static} TITLE_FONT: Font
                + {static} NORMAL_FONT: Font
            }
            class Dimensions {
                + {static} DEFAULT_WINDOW_SIZE: Dimension
            }
        }

        package startscreen {
            class StartScreen <<UI>> {
                +new(onStartButtonClick: ActionListener): StartScreen
            }
            class StartButtonListener <<ViewListener>> {
                - mainWindowController: MainWindowController
                + new(mainWindowController: MainWindowController): StartButtonListener
                + actionPerformed(event: ActionEvent)
            }
        }

        package choicescreen {
            class ChoiceScreen <<UI>> {
                + new(choiceButtonListener: ChoiceButtonListener): ChoiceScreen
                + setHp(hp: int)
                + setWeaponName(weaponName: WeaponName)
                + setStoryTitle(title: String)
                + setStoryChoices(choice: String[])
            }
            class ChoiceScreenController <<UIController>> {
                - choicescreen: ChoiceScreen
                - playerManager: PlayerManager
                - storyManager: StoryManager
                + new(choiceScreen: ChoiceScreen, playerManager: PlayerManager, storyManager: StoryManager): ChoiceScreenController
                - updateHp(hp: int)
                - updateWeaponName(weaponName: WeaponName)
                - updateStoryTitle(title: String)
                - updateStoryChoices(choice: String[])
                - updateStory()
                + notifyChoice(choice: String)
            }
            class ChoiceButtonListener <<ViewListener>> {
                - controller: ChoiceScreenController
                + setController(controller: ChoiceScreenController)
                + actionPerformed(event: ActionEvent)
            }
        }

    }

    class Main <<system>>{
        + {static} main(args: String[])
    }
}

WindowScreen <|-- StartScreen
WindowScreen <|-- ChoiceScreen

Story <|-- TownStory
Story <|-- CrossTheRoadStory
Story <|-- TalkGuardStory
Story <|-- AttackGuardStory

Weapon <|-- Knife
Weapon <|-- LongSword

Main --> MainWindowController

MainWindowController -> MainWindow

MainWindow *--> WindowScreen

StartButtonListener <-* StartScreen
MainWindowController <-- StartButtonListener

ChoiceScreen "1"<-* ChoiceScreenController
ChoiceScreen *--> ChoiceButtonListener
ChoiceScreenController <-- ChoiceButtonListener
ChoiceScreenController *--->"1" PlayerManager
ChoiceScreenController *--->"1" StoryManager


PlayerManager *-->"1" Player

Player *-->"1" Weapon

StoryManager *-->"1" Story

Story --> Story: Next Story

@enduml
